(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fd23018"],{2115:function(e,t,r){},"71b9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"change"==e.type?"编辑轮播图":"创建轮播图",visible:e.dialogFormVisible,"destroy-on-close":"","before-close":e.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.formRules}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{maxlength:"20","show-word-limit":""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"分组"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}},e._l(e.groupOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"上传图片",prop:"pic"}},[r("el-upload",{ref:"upload",staticClass:"my-uploader",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":e.uploaderImg,accept:".jpg, .jpeg, .png, .gif, .bmp, .pdf, .JPG, .JPEG, .PBG, .GIF, .BMP, .PDF"}},[e.form.pic?r("img",{staticClass:"uploaderImg",attrs:{src:e.form.pic}}):r("i",{staticClass:"el-icon-plus my-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"链接"}},[r("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),r("el-form-item",{attrs:{label:"上架"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.online,callback:function(t){e.$set(e.form,"online",t)},expression:"form.online"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)},a=[],i=(r("d3b7"),r("96cf"),r("bea7")),o={props:{type:String,dialogFormVisible:Boolean,info:Object},mixins:[i["a"]],data:function(){return{fullscreenLoading:!1,id:"",form:{title:"",group:0,pic:"",url:"",online:!0},formRules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],pic:[{required:!0,message:"请上传图片",trigger:"blur"}]},groupOptions:[{label:"首页",value:0},{label:"发现",value:1},{label:"我的",value:2}]}},created:function(){},methods:{submitChange:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=this.form.online?0:1,r.next=3,regeneratorRuntime.awrap(this.$api.updateCarouselImg(this.id,this.form.title,this.form.group,this.form.pic,this.form.url,e).catch((function(e){return e})));case 3:return t=r.sent,r.abrupt("return",t);case 5:case"end":return r.stop()}}),null,this)},submitCreate:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=this.form.online?0:1,r.next=3,regeneratorRuntime.awrap(this.$api.createCarouselImg(this.form.title,this.form.group,this.form.pic,this.form.url,e).catch((function(e){return e})));case 3:return t=r.sent,r.abrupt("return",t);case 5:case"end":return r.stop()}}),null,this)}},watch:{info:function(){this.id=this.info.id,this.form={title:this.info.title,group:this.info.group_id,pic:this.info.pic,url:this.info.url,online:0==this.info.online}}}},s=o,l=(r("954f"),r("2877")),c=Object(l["a"])(s,n,a,!1,null,"18c7e186",null);t["default"]=c.exports},"954f":function(e,t,r){"use strict";var n=r("2115"),a=r.n(n);a.a},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,l="name";!n||l in i||a(i,l,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},bea7:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("b0c0"),r("d3b7"),r("96cf");var n={methods:{uploaderImg:function(e){var t,r,n,a;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if("articleType"==this.$route.name?(t=e.size/1024/1024<.1,r=100):(t=e.size/1024/1024<.5,r=500),console.log(t),t){i.next=5;break}return this.$message.error("上传文件大小不能超过 ".concat(r,"k!")),i.abrupt("return",!1);case 5:n=new FileReader,a=this,n.readAsDataURL(e.raw),n.onload=function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(a.$api.uploadImgByBase64(n.result,"article_type").catch((function(e){return e})));case 2:e=t.sent,200==e.ret&&0==e.data.err_code?a.form.litpic=e.data.url:a.$message({message:"图片上传失败,刷新或换图片！",type:"error"});case 4:case"end":return t.stop()}}))};case 9:case"end":return i.stop()}}),null,this)},closeDialog:function(){var e="change"==this.type?"change":"create";this.$emit("closeDialog",e)},submitForm:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.form.validate((function(t){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=20;break}if(e.fullscreenLoading=!0,"change"!=e.type){n.next=8;break}return n.next=5,regeneratorRuntime.awrap(e.submitChange());case 5:r=n.sent,n.next=16;break;case 8:if("create"!=e.type){n.next=14;break}return n.next=11,regeneratorRuntime.awrap(e.submitCreate());case 11:r=n.sent,n.next=16;break;case 14:return e.$message({message:"操作失败！",type:"error"}),n.abrupt("return",!1);case 16:200==r.ret&&0==r.data.err_code?(e.$message({message:"操作成功!",type:"success"}),e.$router.go(0)):200==r.ret&&1==r.data.err_code?e.$message({message:"你不是管理员，无权限操作!",type:"warning"}):"请登录后再操作"==r?e.$message({message:"请登录后再操作!",type:"warning"}):"取消操作"==r?e.$message({message:"取消操作成功!",type:"info"}):e.$message({message:"网络错误，操作失败！",type:"error"}),e.fullscreenLoading=!1,n.next=21;break;case 20:return n.abrupt("return",!1);case 21:case"end":return n.stop()}}))}));case 1:case"end":return t.stop()}}),null,this)}}}}}]);
//# sourceMappingURL=chunk-8fd23018.28110a8f.js.map